import{j as e,r,g as S,a as P,C as E,b as I,c as M}from"./index-CtYO4Hme.js";const $=[{juz_number:1,surahs:[{id:1,name:"الفاتحة"},{id:2,name:"البقرة"}]},{juz_number:2,surahs:[{id:2,name:"البقرة"}]},{juz_number:3,surahs:[{id:2,name:"البقرة"},{id:3,name:"آل عمران"}]},{juz_number:4,surahs:[{id:3,name:"آل عمران"},{id:4,name:"النساء"}]},{juz_number:5,surahs:[{id:4,name:"النساء"}]},{juz_number:6,surahs:[{id:4,name:"النساء"},{id:5,name:"المائدة"}]},{juz_number:7,surahs:[{id:5,name:"المائدة"},{id:6,name:"الأنعام"}]},{juz_number:8,surahs:[{id:6,name:"الأنعام"},{id:7,name:"الأعراف"}]},{juz_number:9,surahs:[{id:7,name:"الأعراف"},{id:8,name:"الأنفال"}]},{juz_number:10,surahs:[{id:8,name:"الأنفال"},{id:9,name:"التوبة"}]},{juz_number:11,surahs:[{id:9,name:"التوبة"},{id:10,name:"يونس"},{id:11,name:"هود"}]},{juz_number:12,surahs:[{id:11,name:"هود"},{id:12,name:"يوسف"}]},{juz_number:13,surahs:[{id:12,name:"يوسف"},{id:13,name:"الرعد"},{id:14,name:"إبراهيم"}]},{juz_number:14,surahs:[{id:15,name:"الحجر"},{id:16,name:"النحل"}]},{juz_number:15,surahs:[{id:17,name:"الإسراء"},{id:18,name:"الكهف"}]},{juz_number:16,surahs:[{id:18,name:"الكهف"},{id:19,name:"مريم"},{id:20,name:"طه"}]},{juz_number:17,surahs:[{id:21,name:"الأنبياء"},{id:22,name:"الحج"}]},{juz_number:18,surahs:[{id:23,name:"المؤمنون"},{id:24,name:"النور"},{id:25,name:"الفرقان"}]},{juz_number:19,surahs:[{id:25,name:"الفرقان"},{id:26,name:"الشعراء"},{id:27,name:"النمل"}]},{juz_number:20,surahs:[{id:27,name:"النمل"},{id:28,name:"القصص"},{id:29,name:"العنكبوت"}]},{juz_number:21,surahs:[{id:29,name:"العنكبوت"},{id:30,name:"الروم"},{id:31,name:"لقمان"},{id:32,name:"السجدة"},{id:33,name:"الأحزاب"}]},{juz_number:22,surahs:[{id:33,name:"الأحزاب"},{id:34,name:"سبأ"},{id:35,name:"فاطر"},{id:36,name:"يس"}]},{juz_number:23,surahs:[{id:36,name:"يس"},{id:37,name:"الصافات"},{id:38,name:"ص"},{id:39,name:"الزمر"}]},{juz_number:24,surahs:[{id:39,name:"الزمر"},{id:40,name:"غافر"},{id:41,name:"فصلت"}]},{juz_number:25,surahs:[{id:41,name:"فصلت"},{id:42,name:"الشورى"},{id:43,name:"الزخرف"},{id:44,name:"الدخان"},{id:45,name:"الجاثية"}]},{juz_number:26,surahs:[{id:46,name:"الأحقاف"},{id:47,name:"محمد"},{id:48,name:"الفتح"},{id:49,name:"الحجرات"},{id:50,name:"ق"},{id:51,name:"الذاريات"}]},{juz_number:27,surahs:[{id:51,name:"الذاريات"},{id:52,name:"الطور"},{id:53,name:"النجم"},{id:54,name:"القمر"},{id:55,name:"الرحمن"},{id:56,name:"الواقعة"},{id:57,name:"الحديد"}]},{juz_number:28,surahs:[{id:58,name:"المجادلة"},{id:59,name:"الحشر"},{id:60,name:"الممتحنة"},{id:61,name:"الصف"},{id:62,name:"الجمعة"},{id:63,name:"المنافقون"},{id:64,name:"التغابن"},{id:65,name:"الطلاق"},{id:66,name:"التحريم"}]},{juz_number:29,surahs:[{id:67,name:"الملك"},{id:68,name:"القلم"},{id:69,name:"الحاقة"},{id:70,name:"المعارج"},{id:71,name:"نوح"},{id:72,name:"الجن"},{id:73,name:"المزمل"},{id:74,name:"المدثر"},{id:75,name:"القيامة"},{id:76,name:"الإنسان"},{id:77,name:"المرسلات"}]},{juz_number:30,surahs:[{id:78,name:"النبأ"},{id:79,name:"النازعات"},{id:80,name:"عبس"},{id:81,name:"التكوير"},{id:82,name:"الإنفطار"},{id:83,name:"المطففين"},{id:84,name:"الإنشقاق"},{id:85,name:"البروج"},{id:86,name:"الطارق"},{id:87,name:"الأعلى"},{id:88,name:"الغاشية"},{id:89,name:"الفجر"},{id:90,name:"البلد"},{id:91,name:"الشمس"},{id:92,name:"الليل"},{id:93,name:"الضحى"},{id:94,name:"الشرح"},{id:95,name:"التين"},{id:96,name:"العلق"},{id:97,name:"القدر"},{id:98,name:"البينة"},{id:99,name:"الزلزلة"},{id:100,name:"العاديات"},{id:101,name:"القارعة"},{id:102,name:"التكاثر"},{id:103,name:"العصر"},{id:104,name:"الهمزة"},{id:105,name:"الفيل"},{id:106,name:"قريش"},{id:107,name:"الماعون"},{id:108,name:"الكوثر"},{id:109,name:"الكافرون"},{id:110,name:"النصر"},{id:111,name:"المسد"},{id:112,name:"الإخلاص"},{id:113,name:"الفلق"},{id:114,name:"الناس"}]}],A=({className:u})=>e.jsx("svg",{className:u,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),R=({surahs:u,readingFontSize:h,onReadingFontSizeChange:N})=>{const[s,_]=r.useState(()=>{const a=localStorage.getItem("lastReadPage");return a?parseInt(a,10):1}),[l,x]=r.useState(null),[z,p]=r.useState(!1),[f,j]=r.useState(null),[c,g]=r.useState(!1),[d,b]=r.useState("surah");r.useEffect(()=>{localStorage.setItem("lastReadPage",s.toString())},[s]);const y=r.useCallback(async a=>{p(!0),j(null);try{const n=`page_${a}`,i=await S(n);if(i){x({verses:i});return}const o=await fetch(`https://api.quran.com/api/v4/verses/by_page/${a}?language=ar&words=false&fields=text_uthmani`);if(!o.ok)throw new Error("Failed to fetch page data. Please check your internet connection.");const t=await o.json();await P(n,t.verses),x(t)}catch(n){j(n instanceof Error?n.message:"An unknown error occurred.")}finally{p(!1)}},[]);r.useEffect(()=>{y(s)},[s,y]);const m=a=>{a>=1&&a<=604&&(_(a),g(!1))},k=()=>{if(z)return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(f)return e.jsx("div",{className:"text-center text-red-500 p-4",children:f});if(!l)return null;const a={};return l.verses.forEach(n=>{var t;const[i,o]=n.verse_key.split(":").map(Number);if(o===1&&i!==1){const v=(t=u.find(C=>C.id===i))==null?void 0:t.name;v&&(a[n.id]=v)}}),e.jsx("div",{className:"font-amiri-quran text-right leading-loose p-4",style:{fontSize:`${h}px`},children:l.verses.map(n=>e.jsxs(M.Fragment,{children:[a[n.id]&&e.jsxs("div",{className:"my-4 p-2 border-y-2 border-mushaf-border text-center text-xl font-bold",children:["سورة ",a[n.id]]}),n.verse_key==="1:1"||a[n.id]&&n.verse_key.split(":")[0]!=="9"?e.jsx("div",{className:"my-2 text-center text-lg",children:"بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ"}):null,e.jsxs("span",{className:"ayah-text",children:[n.text_uthmani,e.jsx("span",{className:"ayah-number font-sans text-xs text-primary mx-1 p-1",children:`﴿${n.verse_key.split(":")[1]}﴾`})]})]},n.id))})},w=()=>e.jsxs("div",{className:"p-4 bg-mushaf-background border-t border-mushaf-border",children:[e.jsxs("div",{className:"flex justify-center mb-4 border-b border-mushaf-border pb-2",children:[e.jsx("button",{onClick:()=>b("surah"),className:`px-4 py-2 text-sm font-bold ${d==="surah"?"text-primary border-b-2 border-primary":"text-text-secondary"}`,children:"السور"}),e.jsx("button",{onClick:()=>b("juz"),className:`px-4 py-2 text-sm font-bold ${d==="juz"?"text-primary border-b-2 border-primary":"text-text-secondary"}`,children:"الأجزاء"}),e.jsx("button",{onClick:()=>b("page"),className:`px-4 py-2 text-sm font-bold ${d==="page"?"text-primary border-b-2 border-primary":"text-text-secondary"}`,children:"الصفحات"})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto custom-scrollbar-mushaf",children:[d==="surah"&&e.jsx("select",{onChange:a=>m(I[Number(a.target.value)]),className:"w-full p-2 bg-mushaf-page border border-mushaf-border rounded",children:u.map(a=>e.jsxs("option",{value:a.id,children:[a.id,". ",a.name]},a.id))}),d==="juz"&&e.jsx("select",{onChange:a=>m(Math.floor((Number(a.target.value)-1)*20+1)),className:"w-full p-2 bg-mushaf-page border border-mushaf-border rounded",children:$.map(a=>e.jsxs("option",{value:a.juz_number,children:["الجزء ",a.juz_number]},a.juz_number))}),d==="page"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"604",defaultValue:s,onBlur:a=>m(Number(a.target.value)),className:"w-full p-2 text-center bg-mushaf-page border border-mushaf-border rounded"}),e.jsx("span",{className:"text-text-secondary",children:"/ 604"})]})]})]});return e.jsxs("div",{className:"bg-mushaf-background min-h-[calc(100vh-64px)] animate-fade-in",children:[e.jsx("style",{children:`
        .custom-scrollbar-mushaf::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar-mushaf::-webkit-scrollbar-track { background: var(--color-mushaf-background); }
        .custom-scrollbar-mushaf::-webkit-scrollbar-thumb { background: var(--color-mushaf-border); border-radius: 4px; }
        `}),e.jsx("div",{className:"max-w-4xl mx-auto py-4 px-2 sm:px-4",children:e.jsxs("div",{className:"bg-mushaf-page border-4 border-mushaf-border rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b-2 border-mushaf-border",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>g(!c),className:"flex items-center gap-2 text-text-secondary p-2 rounded hover:bg-mushaf-background",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-bold",children:"الفهرس"}),e.jsx(E,{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm",children:"الخط"}),e.jsx("input",{type:"range",min:"16",max:"40",step:"2",value:h,onChange:a=>N(Number(a.target.value)),className:"w-24 h-2 bg-mushaf-border rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),c&&w(),e.jsx("div",{className:"min-h-[70vh]",children:k()}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-t-2 border-mushaf-border",children:[e.jsx("button",{onClick:()=>m(s+1),disabled:s===604,className:"text-text-secondary disabled:opacity-50 font-bold p-2",children:"التالي"}),e.jsx("div",{className:"font-mono text-sm",children:s}),e.jsx("button",{onClick:()=>m(s-1),disabled:s===1,className:"text-text-secondary disabled:opacity-50 font-bold p-2",children:"السابق"})]})]})})]})};export{R as default};
