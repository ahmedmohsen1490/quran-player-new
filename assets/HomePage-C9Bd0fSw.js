import{j as e,T as M,r as x,S as C,H as R,B as P,A as E,R as F,K as B}from"./index-CtYO4Hme.js";const z=({stats:t})=>e.jsxs("div",{className:"bg-card rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3 text-center",children:"إحصائيات الاستماع"}),e.jsxs("div",{className:"flex justify-around",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:t.hoursThisWeek.toFixed(1)}),e.jsx("p",{className:"text-sm text-text-secondary",children:"ساعة هذا الأسبوع"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:t.surahsCompleted}),e.jsx("p",{className:"text-sm text-text-secondary",children:"سورة مكتملة"})]})]})]}),S=6236,H=()=>new Date().toISOString().split("T")[0],O=({challenge:t})=>{if(!t||!t.isActive)return null;const m=Object.values(t.completedAyahs||{}).flat().length;if(m>=S)return e.jsxs("div",{className:"bg-card rounded-lg shadow-md p-4 flex items-center gap-4 animate-fade-in",children:[e.jsx(M,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:"مبارك!"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"لقد أكملت تحدي ختم القرآن بنجاح."})]})]});if(t.isPaused)return e.jsxs("div",{className:"bg-card rounded-lg shadow-md p-4 flex items-center gap-4 animate-fade-in",children:[e.jsx(M,{className:"w-8 h-8 text-text-secondary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:"التحدي متوقف مؤقتًا"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"استأنف التحدي من صفحة التحدي للمتابعة."})]})]});const a=H(),h=new Date(t.startDate),p=new Date(a).getTime()-h.getTime(),i=Math.max(0,Math.floor(p/(1e3*3600*24))),u=S-m,j=Math.max(1,t.durationDays-i),y=j>0?Math.ceil(u/j):u,f=t.progress[a]||0,g=Math.max(0,y-f);return e.jsx("div",{className:"bg-card rounded-lg shadow-md p-4 animate-fade-in",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:"ورد اليوم"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"هدف اليوم لإتمام ختم القرآن."})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g}),e.jsx("p",{className:"text-sm text-text-secondary",children:"آية متبقية"})]})]})})},v={Fajr:"الفجر",Dhuhr:"الظهر",Asr:"العصر",Maghrib:"المغرب",Isha:"العشاء"},q=({settings:t,onOpenSettings:m})=>{const[a,h]=x.useState(null),[c,p]=x.useState(null),[i,u]=x.useState(""),[j,y]=x.useState(!0),[f,g]=x.useState(null),I=x.useRef();return x.useEffect(()=>{const l=async()=>{y(!0),g(null);try{const{city:o,country:n,method:b,school:s,tune:d}=t,r={Imsak:0,Fajr:0,Sunrise:0,Dhuhr:0,Asr:0,Maghrib:0,Isha:0,Midnight:0,...d},N=`${r.Imsak},${r.Fajr},${r.Sunrise},${r.Dhuhr},${r.Asr},${r.Maghrib},${r.Isha},${r.Midnight}`,w=await(await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(o)}&country=${encodeURIComponent(n)}&method=${b}&school=${s}&tune=${N}`)).json();if(w.code!==200||!w.data.timings)throw new Error(w.data||"Failed to fetch prayer times.");const{Fajr:T,Dhuhr:D,Asr:L,Maghrib:A,Isha:$}=w.data.timings;h({Fajr:T,Dhuhr:D,Asr:L,Maghrib:A,Isha:$})}catch(o){g(o instanceof Error?o.message:"An unknown error occurred.")}finally{y(!1)}};t.city&&t.country?l():(y(!1),g("الرجاء تحديد الموقع في الإعدادات."))},[t]),x.useEffect(()=>{const l=()=>{if(!a)return;const o=new Date;let n=null;const b=Object.entries(a).filter(([s])=>v[s]).map(([s,d])=>{const[r,N]=d.split(":").map(Number),k=new Date;return k.setHours(r,N,0,0),{name:v[s],time:d,date:k}}).sort((s,d)=>s.date.getTime()-d.date.getTime());for(const s of b)if(s.date>o){n=s;break}if(!n&&b.length>0){const s=b[0];s.date.setDate(s.date.getDate()+1),n=s}if(p(n?{name:n.name,time:n.time}:null),n){const s=n.date.getTime()-o.getTime(),d=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60)),N=Math.floor(s%(1e3*60)/1e3);u(`${String(d).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(N).padStart(2,"0")}`)}else u("")};return l(),I.current=window.setInterval(l,1e3),()=>clearInterval(I.current)},[a]),e.jsxs("div",{className:"bg-card rounded-lg shadow-md p-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"المؤذن"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[t.city,", ",t.country]})]}),e.jsx("button",{onClick:m,className:"p-2 rounded-full text-text-secondary hover:bg-border-color",children:e.jsx(C,{className:"w-6 h-6"})})]}),j&&e.jsx("p",{className:"text-center text-sm text-text-secondary py-4",children:"...جاري تحميل أوقات الصلاة"}),f&&e.jsx("p",{className:"text-center text-sm text-red-500 py-4",children:f}),a&&!j&&!f&&e.jsxs(e.Fragment,{children:[c&&e.jsxs("div",{className:"text-center my-3 p-3 bg-primary/10 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-primary",children:["الصلاة التالية: ",e.jsx("strong",{children:c.name})]}),e.jsx("p",{className:"text-2xl font-bold font-mono text-primary tracking-wider",children:i})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2 text-center border-t border-border-color pt-3",children:Object.entries(a).map(([l,o])=>e.jsxs("div",{className:(c==null?void 0:c.name)===v[l]?"p-1 bg-primary/20 rounded-md":"p-1",children:[e.jsx("p",{className:"font-semibold text-text-primary text-sm",children:v[l]}),e.jsx("p",{className:"text-xs text-text-secondary font-mono",children:o})]},l))})]})]})},W=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m0-18l-3.5 3.5M12 3l3.5 3.5M2 12h20"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 14.364A5.002 5.002 0 013 18.25m14.728-3.886a5.002 5.002 0 00-2.636 3.886"})]}),U=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v.01M9 6v.01M15 6v.01M7.5 9.5v.01M16.5 9.5v.01"})]}),_=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1012 7.5h-1.5"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.375 18.375a7.5 7.5 0 10-5.25-5.25"}),e.jsx("circle",{cx:"6",cy:"6",r:"2.25"}),e.jsx("circle",{cx:"18",cy:"6",r:"2.25"}),e.jsx("circle",{cx:"6",cy:"18",r:"2.25"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 13.5a2.25 2.25 0 104.5 0 2.25 2.25 0 00-4.5 0z"})]}),Q=({onNavigate:t,stats:m,challenge:a,muazzinSettings:h,onOpenSettings:c})=>{const p=[{page:"audio",label:"أنصت",icon:e.jsx(E,{className:"w-10 h-10 mb-3 text-primary"})},{page:"reading",label:"اقرأ",icon:e.jsx(F,{className:"w-10 h-10 mb-3 text-primary"})},{page:"azkar",label:"الأذكار",icon:e.jsx(_,{className:"w-10 h-10 mb-3 text-primary"})},{page:"asbab",label:"تدبر",icon:e.jsx(U,{className:"w-10 h-10 mb-3 text-primary"})},{page:"quiz",label:"فقه وحكمة",icon:e.jsx(W,{className:"w-10 h-10 mb-3 text-primary"})},{page:"kids",label:"عالم الطفل",icon:e.jsx(B,{className:"w-10 h-10 mb-3 text-primary"})}];return e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-8 animate-fade-in",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{settings:h,onOpenSettings:c}),e.jsx(O,{challenge:a}),e.jsx(z,{stats:m}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 pt-4",children:p.map(i=>e.jsxs("button",{onClick:()=>t(i.page),className:"bg-card rounded-2xl shadow-md p-6 flex flex-col items-center justify-center text-center hover:bg-border-color transform hover:-translate-y-1 transition-all duration-200",children:[i.icon,e.jsx("h2",{className:"text-lg font-bold text-text-primary",children:i.label})]},i.page))}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>t("history"),className:"bg-card rounded-2xl shadow-md p-6 w-full flex flex-col items-center justify-center text-center hover:bg-border-color transform hover:-translate-y-1 transition-all duration-200",children:[e.jsx(R,{className:"w-12 h-12 mb-3 text-primary"}),e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"اعرف تاريخك"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"السيرة النبوية، الصحابة، والغزوات"})]})}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>t("ronaq_mind"),className:"bg-card rounded-2xl shadow-md p-6 w-full flex flex-col items-center justify-center text-center hover:bg-border-color transform hover:-translate-y-1 transition-all duration-200",children:[e.jsx(P,{className:"w-12 h-12 mb-3 text-primary"}),e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Ronaq Mind"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"حيث يلتقى الجمال بالذكاء"})]})})]})})};export{Q as default};
